{% extends 'base.html' %}
{% block content %}

<h2 class="mb-4">üìã Lista de Alunos</h2>

<form method="GET" class="row g-3 mb-3">
    <div class="col-md-6">
        <input
            type="text"
            name="busca"
            class="form-control"
            placeholder="Buscar aluno pelo nome"
            value="{{ request.args.get('busca', '') }}"
        >
    </div>

    <div class="col-md-2">
        <button class="btn btn-primary w-100">
            üîç Buscar
        </button>
    </div>

    <div class="col-md-2">
        <a href="{{ url_for('lista_alunos') }}" class="btn btn-secondary w-100">
            Limpar
        </a>
    </div>
</form>

<div class="card shadow">
    <div class="card-body">

        {% if alunos %}
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Nome</th>
                    <th>Telefone</th>
                    <th>Plano</th>
                    <th>Status</th>
                    <th class="text-center">A√ß√µes</th>
                </tr>
            </thead>

            <tbody>
                {% for aluno in alunos %}
                <tr>
                    <td>{{ aluno.nome }}</td>
                    <td>{{ aluno.telefone }}</td>
                    <td>{{ aluno.plano }}</td>
                    <td>{{ aluno.status if aluno.status else '‚Äî' }}</td>

                    <td class="d-flex gap-2 justify-content-center">

                        {% if aluno.whatsapp %}
                        <a href="{{ aluno.whatsapp }}"
                           target="_blank"
                           class="btn btn-success btn-sm"
                           title="WhatsApp">
                            üì≤
                        </a>
                        {% endif %}

                        <a href="{{ url_for('editar_aluno', id=aluno.id) }}"
                           class="btn btn-warning btn-sm"
                           title="Editar">
                            ‚úèÔ∏è
                        </a>

                        <a href="{{ url_for('excluir_aluno', id=aluno.id) }}"
                           class="btn btn-danger btn-sm"
                           onclick="return confirm('Deseja excluir este aluno?')"
                           title="Excluir">
                            üóë
                        </a>

                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% else %}
        <p class="text-muted mb-0">
            Nenhum aluno cadastrado.
        </p>
        {% endif %}

        <a href="{{ url_for('alunos') }}" class="btn btn-secondary mt-3">
            ‚¨ÖÔ∏è Voltar ao cadastro
        </a>

    </div>
</div>

{% endblock %}
